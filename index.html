<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>zzapGame</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f5f5f5;
      color: black;
      text-align: center;
      padding: 2em;
    }
    .hidden { display: none; }

    #user-display {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 9999;
      background-color: white;
      padding: 6px 10px;
      border-radius: 6px;
      text-align: left;
      font-size: 0.9em;
      font-weight: bold;
      line-height: 1.4;
      box-shadow: 1px 1px 5px rgba(0,0,0,0.1);
    }

    #bgm-player {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    #bgm-player button {
      background-color: #3f40d3 !important;
      color: white;
    }

    .typewriter {
      font-weight: bold;
      font-size: 1.1em;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid #3f40d3;
      width: 0;
      animation: typing 3s steps(30, end) forwards, blink 0.75s step-end infinite;
      margin-bottom: 1em;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    button {
      font-size: 1em;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      background-color: #3f40d3;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2c2db2;
    }
    .nav-button {
      background-color: #444 !important;
      font-size: 0.85em !important;
      padding: 5px 12px !important;
    }
    .logo {
      width: 200px;
      margin-bottom: 1em;
    }
  </style>
</head>
<body>

  <div id="user-display" class="hidden">
    <p id="user-class-line"></p>
    <p id="coin-line">Coin: 0</p>
  </div>

  <div id="bgm-player">
    <audio id="bgm" src="zzapbgm.m4a" loop></audio>
    <button onclick="document.getElementById('bgm').play()">▶</button>
    <button onclick="document.getElementById('bgm').pause()">⏸</button>
  </div>

  <img class="logo" src="zzaplogo.png"/>

  <div id="login-page">
    <p>ID를 입력하세요.</p>
    <input id="id-input" type="text" />
    <button onclick="checkLogin()">확인</button>
    <p id="login-error" style="color: #ff4444;"></p>
  </div>

  <!-- 메인 화면 -->  
  <div id="main-page" class="hidden">
    <p><span style="font-weight: bold;">[건물 입구]</span><br><br>흰 관을 연상시키는 건물의 입구에 다다른다.<br>돌로 된 정문 표면에는 알 수 없는 문자가 빼곡히 음각으로 새겨져 있다. 무엇을 기록한 것인지는 알 수 없지만 이유 모를 깊이와 장엄함이 느껴진다.<br>이 입구를 기점 삼아 건물 안으로 들어가거나, 섬의 시설물을 둘러보고 돌아올 수 있을 것 같다.</p>
    <button onclick="goTo('inside')">건물 안으로 들어간다</button>
    <button onclick="goTo('outside')">건물 밖으로 나간다</button>
  </div>

  <!-- 내부 1층 --> 
  <div id="inside" class="hidden">
    <p><span style="font-weight: bold;">[건물 1층]</span><br><br>대리석 바닥이 반짝거리는 건물 1층. 정면에 방문객을 맞이하는 <span style="color: #3f40d3;">로비</span>가 보이고, 로비 좌측과 우측으로 긴 복도가 뻗어나간다. 왼쪽은 <span style="color: #3f40d3;">'레스토랑'</span>, 오른쪽은 <span style="color: #3f40d3;">'내빈용 객실'</span>.</p>
    <button onclick="goTo('lobby')">로비</button>
    <button onclick="goTo('restaurant')">레스토랑</button>
    <button onclick="goTo('suite')">내빈용 객실</button><br>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

    <!-- 로비 --> 
    <div id="lobby" class="hidden">
    <p><span style="font-weight: bold;">[로비]</span><br><br>건물에 들어오면 가장 먼저 보게 되는 곳.<br>우아한 석조 <span style="color: #3f40d3;">카운터</span>를 중심으로 내빈을 위한 <span style="color: #3f40d3;">대기 공간</span>이 마련되어 있다.<br>카운터 뒤편에는 유리로 된 <span style="color: #3f40d3;">엘리베이터</span>가 배치되어 있어 시선이 저절로 천장을 향한다.<br>이 건물은 엘리베이터 주변의 공간이 뻥 뚫린 구조로 설계된 모양이다. 층고가 꽤 높아 보이는데 몇 층까지 있는 걸까...</p>
    <button onclick="goTo('counter')">카운터</button>
    <button onclick="goTo('waitingspace')">대기 공간</button>
    <button onclick="goTo('elevator')">엘리베이터</button><br>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

    <!-- 로비:카운터 --> 
    <div id="counter" class="hidden">
    <p><span style="font-weight: bold;">[카운터]</span><br><br>공사중.</p>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
 </div>

    <!-- 로비:대기 공간 --> 
    <div id="waitingspace" class="hidden">
    <p><span style="font-weight: bold;">[대기 공간]</span><br><br>공사중.</p>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
 </div>
  
    <!-- 로비:엘리베이터 --> 
    <div id="elevator" class="hidden">
    <p><span style="font-weight: bold;">[엘리베이터]</span><br><br>공사중.</p>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
 </div>      
  
    <!-- 레스토랑 --> 
    <div id="restaurant" class="hidden">
    <p><span style="font-weight: bold;">[레스토랑]</span><br><br>공사중.</p>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

    <!-- 내빈용 객실 --> 
    <div id="suite" class="hidden">
    <p>공사중.</p>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>
  
    <!-- 바깥 1층 --> 
    <div id="outside" class="hidden">
    <p>공사중.</p>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>
  

  <div id="library" class="hidden">
    <p>책들이 아주 많다.</p>
    <button onclick="readBook()">책을 읽는다</button>
    <button onclick="goTo('bookshelf')">책장을 본다</button><br/>
    <button class="nav-button" onclick="goTo('main-page')">메인 홀로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
    <p id="library-result"></p>
  </div>

  <div id="bookshelf" class="hidden">
    <p>모든 책장에 룬의 아이들 시리즈가 꽂혀 있다.</p>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

  <div id="kitchen" class="hidden">
    <p>으믕의 생일 축하 케이크가 시속 50km로 날아다니고 있다. 당신은 케이크에 맞아서 사망했다.</p>
    <button class="nav-button" onclick="goTo('main-page')">메인 홀로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

  <script>
    const userData = {
      mung0515: {
        class: "피자마스터 으믕",
        STR: 2,
        INT: 5,
        OBS: 5,
        POW: 5,
        LUC: 5,
        key: 0,
        coin: 0
      }
    };

    let currentUser = null;
    let pageHistory = [];
    const outputIds = ['gym-result', 'library-result'];

    function checkLogin() {
      const id = document.getElementById('id-input').value;
      if (userData[id]) {
        currentUser = userData[id];
        showWelcomeMessage(currentUser.class);
      } else {
        document.getElementById('login-error').innerText = "아이디가 일치하지 않습니다.";
      }
    }

    function showWelcomeMessage(userClass) {
      document.getElementById('login-page').classList.add('hidden');
      const container = document.createElement('div');
      container.classList.add('typewriter');
      container.innerHTML = `초세계급 "${userClass}" 님을 환영합니다. . .`;
      document.body.appendChild(container);
      setTimeout(() => {
        container.remove();
        showUserInfo();
        document.getElementById('main-page').classList.remove('hidden');
        pageHistory.push('main-page');
      }, 3600);
    }

    function showUserInfo() {
      const userBox = document.getElementById('user-display');
      document.getElementById('user-class-line').innerHTML = `초세계급 "${currentUser.class}"`;
      document.getElementById('coin-line').innerText = `Coin: ${currentUser.coin || 0}`;
      userBox.classList.remove('hidden');
    }

    function updateCoinDisplay() {
      document.getElementById('coin-line').innerText = `Coin: ${currentUser.coin || 0}`;
    }

    function clearOutputs() {
      outputIds.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.innerText = '';
      });
    }

    function goTo(page) {
      document.querySelectorAll('div').forEach(div => {
        if (div.id !== 'user-display') div.classList.add('hidden');
      });
      const target = document.getElementById(page);
      target.classList.remove('hidden');
      target.classList.add('fade-in');
      clearOutputs();
      pageHistory.push(page);
      if (page === 'kitchen') {
        currentUser.key = 1;
        currentUser.coin = (currentUser.coin || 0) + 1;
        updateCoinDisplay();
      }
    }

    function goToWithSound(page, soundFile) {
      const audio = new Audio(soundFile);
      audio.loop = false;
      audio.play();
      goTo(page);
    }

    function goBack() {
      if (pageHistory.length > 1) {
        pageHistory.pop();
        const prev = pageHistory[pageHistory.length - 1];
        document.querySelectorAll('div').forEach(div => {
          if (div.id !== 'user-display') div.classList.add('hidden');
        });
        const target = document.getElementById(prev);
        target.classList.remove('hidden');
        target.classList.add('fade-in');
        clearOutputs();
      }
    }

    function kickDoor() {
      const result = document.getElementById('gym-result');
      let messages = [];
      if (currentUser.key === 1) messages.push("해피해피 코드");
      if (currentUser.STR <= 2) {
        messages.push("발이 아프다. 들어갈 수 없는 것 같다.");
      } else {
        messages.push("문이 열린다!");
      }
      result.innerText = messages.join("\n");
    }

    function readBook() {
      document.getElementById('library-result').innerText = "룬의 아이들 3부 블러디드 많관부!!!!";
    }
  </script>
</body>
</html>
