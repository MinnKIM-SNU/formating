<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>zzapGame</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f5f5f5;
      color: black;
      text-align: center;
      padding: 2em;
    }
    .hidden { display: none; }

#user-display {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 9999;
  display: flex;
  align-items: center;
  background-color: #F5F5F5;
  padding: 8px 12px;
  border-radius: 8px;
  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
  font-family: monospace;
  color: #3F40D3;
  border: 1px solid #ddd;
  min-width: 180px;
}

#barcode-icon {
  width: 60px;
  height: 40px;
  margin-right: 10px;
}

#user-text {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

    #bgm-player {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    #bgm-player button {
      background-color: #3f40d3 !important;
      color: white;
    }

    .fade-in {
      animation: fadein 1.2s ease-in;
            }
  
    @keyframes fadein {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .typewriter {
      font-weight: bold;
      font-size: 1.1em;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid #3f40d3;
      width: 0;
      animation: typing 3s steps(30, end) forwards, blink 0.75s step-end infinite;
      margin-bottom: 1em;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    button {
      font-size: 1em;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      background-color: #3f40d3;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2c2db2;
    }
    .nav-button {
      background-color: #444 !important;
      font-size: 0.85em !important;
      padding: 5px 12px !important;
    }
    .logo {
      width: 200px;
      margin-bottom: 1em;
    }
  </style>
</head>
<body>

  <div id="user-display" class="hidden">
  <img src="zzapbarcode.png" alt="barcode" id="barcode-icon">
  <div id="user-text">
    <div id="user-class-line">User ID :</div>
    <div id="coin-line">Coin :</div>
  </div>
</div>


  <div id="bgm-player">
    <audio id="bgm" src="zzapbgm.m4a" loop></audio>
    <button onclick="document.getElementById('bgm').play()">▶</button>
    <button onclick="document.getElementById('bgm').pause()">⏸</button>
  </div>

  <img class="logo" src="zzaplogo.png"/>

  <div id="login-page">
    <p>ID를 입력하세요.</p>
    <input id="id-input" type="text" />
    <button onclick="checkLogin()">확인</button>
    <p id="login-error" style="color: #ff4444;"></p>
  </div>

  <!-- 메인 화면 -->  
  <div id="main-page" class="hidden">
    <p><span style="font-weight: bold;">[건물 입구]</span><br><br>흰 관을 연상시키는 건물의 입구에 다다른다.<br>돌로 된 정문 표면에는 알 수 없는 문자가 빼곡히 음각으로 새겨져 있다. 무엇을 기록한 것인지는 알 수 없지만 이유 모를 깊이와 장엄함이 느껴진다.<br>이 입구를 기점 삼아 건물 안으로 들어가거나, 섬의 시설물을 둘러보고 돌아올 수 있을 것 같다.</p>
    <button onclick="goTo('inside')">건물 안으로 들어간다</button>
    <button onclick="goTo('outside')">건물 밖으로 나간다</button>
  </div>

  <!-- 내부 1층 --> 
  <div id="inside" class="hidden">
    <p><span style="font-weight: bold;">[건물 1층]</span><br><br>대리석 바닥이 반짝거리는 건물 1층. 정면에 방문객을 맞이하는 <span style="color: #3f40d3;">로비</span>가 보이고, 로비 좌측과 우측으로 긴 복도가 뻗어나간다. 왼쪽은 <span style="color: #3f40d3;">'레스토랑'</span>, 오른쪽은 <span style="color: #3f40d3;">'내빈용 객실'</span>.</p>
    <button onclick="goTo('restaurant')">레스토랑</button>
    <button onclick="goTo('lobby')">로비</button>
    <button onclick="goTo('suite')">내빈용 객실</button><br>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

    <!-- 로비 --> 
    <div id="lobby" class="hidden">
    <p><span style="font-weight: bold;">[로비]</span><br><br>건물에 들어오면 가장 먼저 보게 되는 곳.<br>우아한 석조 <span style="color: #3f40d3;">카운터</span>를 중심으로 내빈을 위한 <span style="color: #3f40d3;">대기 공간</span>이 마련되어 있다.<br>카운터 뒤편에는 유리로 된 <span style="color: #3f40d3;">엘리베이터</span>가 배치되어 있어 시선이 저절로 천장을 향한다.<br>이 건물은 엘리베이터 주변의 공간이 뻥 뚫린 구조로 설계된 모양이다. 층고가 꽤 높아 보이는데 몇 층까지 있는 걸까...</p>
    <button onclick="goTo('counter')">카운터</button>
    <button onclick="goTo('waitingspace')">대기 공간</button>
    <button onclick="goTo('elevator')">엘리베이터</button><br>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

    <!-- 로비:카운터 --> 
    <div id="counter" class="hidden">
    <p><span style="font-weight: bold;">[카운터]</span><br><br>보통이라면 직원이 서 있어야 할 카운터 너머에는 아무도 없다. 가까이 다가가자 공증인의 목소리가 울린다.<br><br><em>”섬 내부는 잘 돌아보고 계신가요?”</em><br><br><em>”꼼꼼히 둘러봐 주신 분들을 위해 작은 퀴즈를 준비했습니다. 기분이 내키신다면 말을 걸어 주세요. 잠시 쉬어가고 싶으실 때는 잡담을 주고받는 것도 좋겠죠.”</em></p>
    <button onclick="goTo('notary')">공증인과 대화하기</button><br>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
 </div>
    <!-- 로비:카운터:notary --> 
    <div id="notary" class="hidden">
    <p><span style="font-weight: bold;">[공증인]</span><br><br>스피커를 통해 흘러나오는 목소리는 정중하고 부드럽다.<br><em>"어떤 일을 도와드릴까요?"</em></p>
    <button id="nota1" onclick="goTodel('notary1', 'nota1')">이 섬에 대해서</button><br>
    <button id="nota2" onclick="goTodel('notary2', 'nota2')">초세계급 기록자 로렘에 대해서</button><br>
    <button id="nota3" onclick="goTodel('notary3', 'nota3')">공증인에 대해서</button><br>
    <button onclick="goTo('notary4')">퀴즈를 푼다</button><br><br>
    <button class="nav-button" onclick="goTo('counter')">대화를 끝낸다</button>
 </div>
    <!-- 로비:카운터:notary1 --> 
    <div id="notary1" class="hidden">
    <p><span style="font-weight: bold;">[공증인]</span><br><br><em>"이 섬은 미래기관에서 초세계급 여러분을 위해 준비한 시설입니다. 본래대로라면 올해 안에 외부에 정식 공개될 예정이었지만… 로렘 님의 추도식을 위해 공개를 앞당기게 되었습니다. 그러다 보니 아직 마땅한 이름조차 없는 장소가 되었지만요. 여러분이 계신 동안 섬 이름 공모전이라도 하는 것이 좋을까요? 하하…"</em></p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
    <!-- 로비:카운터:notary2 --> 
    <div id="notary2" class="hidden">
    <p><span style="font-weight: bold;">[공증인]</span><br><br><em>"로렘 님은 미래기관 1짱이셨습니다 기록에 의하면 시속 50km로 날아다니는 케이크를 맨손으로 캐치 가능하셨다고 해요 어쩌고저쩌고"</em></p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
    <!-- 로비:카운터:notary3 --> 
    <div id="notary3" class="hidden">
    <p><span style="font-weight: bold;">[공증인]</span><br><br><em>"저는 로렘 님의 유언을 절차대로 집행하기 위해 만들어진 공증인 AI입니다. 이곳에 머무르시는 여러분의 편의를 위해 안내와 통번역을 포함한 다양한 역할도 함께 수행하고 있습니다. 섬 어디서든 말을 걸어 주시면 응답하겠습니다."</em></p>
    <button id="nota3-1" onclick="goTodel('notary3-1', 'nota3-1')">AI보다는 사람이 좋다고 항의한다</button>
    <button id="nota3-2" onclick="goTodel('notary3-2', 'nota3-2')">잘 부탁한다고 인사한다</button><br>
 </div>
    <!-- 로비:카운터:notary3-1 --> 
    <div id="notary3-1" class="hidden">
    <p><span style="font-weight: bold;">[공증인]</span><br><br><em>"그렇군요… 희망에 부응할 수 없어 유감입니다."</em><br><br>공증인은 풀이 죽은 것 같다.</p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
    <!-- 로비:카운터:notary3-2 --> 
    <div id="notary3-2" class="hidden">
    <p><span style="font-weight: bold;">[공증인]</span><br><br><em>"네, 잘 부탁드립니다. 초세계급 여러분의 편의를 위해 최선을 다하겠습니다.”</em><br><br>공증인과 인사를 하자, 어느새 카운터 위에 반짝이는 코인이 하나 올라와 있다. 이건 선물일까?<br><span style="font-weight: bold;">1코인을 획득했다.</span></p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
      <!-- 로비:카운터:notary4 --> 
    <div id="notary4" class="hidden">
    <p><span style="font-weight: bold;">[공증인]</span><br><br><em>"그럼 문제입니다. 초세계급 기록자 세세 님의 생년월일을 아시는지요?"</em><br><br>문제를 맞히면 코인으로 연동</p>
    <button class="nav-button" onclick="goTo('notary')">다른 이야기</button>
 </div>
  
    <!-- 로비:대기 공간 --> 
    <div id="waitingspace" class="hidden">
    <p><span style="font-weight: bold;">[대기 공간]</span><br><br>공사중.</p>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
 </div>
  
    <!-- 로비:엘리베이터 --> 
    <div id="elevator" class="hidden">
    <p><span style="font-weight: bold;">[엘리베이터]</span><br><br>아앗~ 공사중이라서 이용할 수 없어! 대신 엘베 바닥이라도 샅샅이 뒤져보자!</p>
    <button id="elevatorbutton" onclick="goTodel('elevator1', 'elevatorbutton')">샅샅이 뒤진다</button><br>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
 </div>      
      <!-- 로비:엘리베이터:탐색 --> 
    <div id="elevator1" class="hidden">
    <p><span style="font-weight: bold;">[엘리베이터]</span><br><br>와~ 코인을 하나 찾았어~ 대박대박~<br><span style="font-weight: bold;">1코인을 획득했다!</span></p>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
 </div>     
  
    <!-- 레스토랑 --> 
    <div id="restaurant" class="hidden">
    <p><span style="font-weight: bold;">[레스토랑]</span><br><br>공사중.<br>조리실 같은 걸 넣나...</p>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

    <!-- 내빈용 객실 --> 
    <div id="suite" class="hidden">
    <p><span style="font-weight: bold;">[내빈용 객실]</span><br><br>이 자리에 초청된 초세계급들이 편히 쉴 수 있도록 개인실이 준비되어 있다. 벌써 들어가서 쉬기에는 기껏 나온 보람이 없다!</p>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>
  
    <!-- 바깥 1층 --> 
    <div id="outside" class="hidden">
    <p>공사중.</p>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>
  

  <div id="library" class="hidden">
    <p>책들이 아주 많다.</p>
    <button onclick="readBook()">책을 읽는다</button>
    <button onclick="goTo('bookshelf')">책장을 본다</button><br/>
    <button class="nav-button" onclick="goTo('main-page')">메인 홀로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
    <p id="library-result"></p>
  </div>

  <div id="bookshelf" class="hidden">
    <p>모든 책장에 룬의 아이들 시리즈가 꽂혀 있다.</p>
    <button class="nav-button" onclick="goTo('main-page')">건물 입구로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

  <div id="kitchen" class="hidden">
    <p>으믕의 생일 축하 케이크가 시속 50km로 날아다니고 있다. 당신은 케이크에 맞아서 사망했다.</p>
    <button class="nav-button" onclick="goTo('main-page')">메인 홀로 돌아가기</button>
    <button class="nav-button" onclick="goBack()">뒤로 가기</button>
  </div>

  <script>
    const userData = {
      mung0515: {
        class: "피자마스터 으믕",
        id: "ThePizzaMaster",
        STR: 2,
        INT: 5,
        OBS: 5,
        POW: 5,
        LUC: 5,
        key: 0,
        coin: 0
      }
    };

    let currentUser = null;
    let pageHistory = [];
    const outputIds = ['gym-result', 'library-result'];

    function checkLogin() {
      const id = document.getElementById('id-input').value;
      if (userData[id]) {
        currentUser = userData[id];
        showWelcomeMessage(currentUser.class);
      } else {
        document.getElementById('login-error').innerText = "아이디가 일치하지 않습니다.";
      }
    }

    function showWelcomeMessage(userClass) {
      document.getElementById('login-page').classList.add('hidden');
      const container = document.createElement('div');
      container.classList.add('typewriter');
      container.innerHTML = `초세계급 ${userClass} 님을 환영합니다. . .`;
      document.body.appendChild(container);
      setTimeout(() => {
        container.remove();
        showUserInfo();
        document.getElementById('main-page').classList.remove('hidden');
        pageHistory.push('main-page');
      }, 3600);
    }

    function showUserInfo() {
      const userBox = document.getElementById('user-display');
      document.getElementById('user-class-line').innerHTML = `User ID: ${currentUser.id}`;
      document.getElementById('coin-line').innerText = `Coin: ${currentUser.coin || 0}`;
      userBox.classList.remove('hidden');
    }

    function updateCoinDisplay() {
      document.getElementById('coin-line').innerText = `Coin: ${currentUser.coin || 0}`;
    }

    function clearOutputs() {
      outputIds.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.innerText = '';
      });
    }

function goTo(page) {
  document.querySelectorAll('div').forEach(div => {
    // user-display 안의 요소들까지 hidden이 안 먹도록 완전 제외
    if (!['user-display', 'user-text', 'barcode-icon'].includes(div.id)) {
      div.classList.add('hidden');
    }
  });
  const target = document.getElementById(page);
  target.classList.remove('hidden');
  target.classList.add('fade-in');
  clearOutputs();
  pageHistory.push(page);
  if (['kitchen', 'elevator1', 'notary3-2'].includes(page)) {
    currentUser.key = 1;
    currentUser.coin = (currentUser.coin || 0) + 1;
    updateCoinDisplay();
  }
  // 🆕 항상 사용자 정보는 보이도록 보장
  document.getElementById('user-display').classList.remove('hidden');
}


    function goToWithSound(page, soundFile) {
      const audio = new Audio(soundFile);
      audio.loop = false;
      audio.play();
      goTo(page);
    }

    function goBack() {
      if (pageHistory.length > 1) {
        pageHistory.pop();
        const prev = pageHistory[pageHistory.length - 1];
        document.querySelectorAll('div').forEach(div => {
          if (div.id !== 'user-display') div.classList.add('hidden');
        });
        const target = document.getElementById(prev);
        target.classList.remove('hidden');
        target.classList.add('fade-in');
        clearOutputs();
      }
    }

    function kickDoor() {
      const result = document.getElementById('gym-result');
      let messages = [];
      if (currentUser.key === 1) messages.push("해피해피 코드");
      if (currentUser.STR <= 2) {
        messages.push("발이 아프다. 들어갈 수 없는 것 같다.");
      } else {
        messages.push("문이 열린다!");
      }
      result.innerText = messages.join("\n");
    }

    function readBook() {
      document.getElementById('library-result').innerText = "룬의 아이들 3부 블러디드 많관부!!!!";
    }

    function goTodel(targetPage, buttonId) {
  const btn = document.getElementById(buttonId);
  if (btn) btn.remove(); // 한 번만 지움
  goTo(targetPage); // 기존 페이지 이동 로직 재사용
}

  </script>
</body>
</html>
